<!DOCTYPE html>
<html ng-app="AlertsApp">
  <head>
    <title>Alerts</title>
    <meta charset="UTF-8" />
    <script type="text/javascript" src="angular/angular.min.js"></script>
    <script type="text/javascript" src="scripts/alerts.js"></script>
    <style>
      html { height: 100%; width: 100%; }
      body {
        width: 100%;
        height: 100%;
        margin: 0px;
        padding: 0px;
        background-color: #1a1a1a;
      }
      div {
        overflow-x: hidden;
        overflow-y: auto;
      }
      table {
        /* whatever this does, it fixes FireFox's rowspan border rendering */
        border-collapse: separate !important;
      }
      #content {
        height: 100%;
      }
      .fullscreen {
        width:   100% !important;
        padding:    0 !important;
        margin:     0 !important;
      }
      img.has-errors {
        border: 2px solid red;
      }
      div.background {
        overflow: auto;
        width:    100%;
        height:   100%;
        color:    #dfdfdf;
      }
      table.alertstable {
        empty-cells: show;
      }
      div.hostname {
        border: 0;
        white-space: nowrap;
        width: 250px;
        transform: rotate(270deg);
        transform-origin: 110px 110px 0px;
        -webkit-transform: rotate(270deg);
        -webkit-transform-origin: 110px 110px 0px;
        overflow: visible;
      }
      table.alertstable tr {
        height: 22px;
      }
      table.alertstable th {
        font-weight: bold;
      }
      table.alertstable th,
      table.alertstable td {
        border: 1px solid #1a1a1a !important;
        border-radius: 2px;
        padding: 1px 3px !important;
        font-size: 9pt;
      }
      table.alertstable tr.oddrow > td {
        background-color: rgba(255, 255, 255, 0.1);
      }
      table.alertstable tr.evenrow > td {
        background-color: rgba(255, 255, 255, 0.03);
      }
      table.alertstable tbody tr:hover {
        background-color: rgba(245, 245, 245, 0.5);
      }
      th.alerttitle {
        text-align:     center !important;
        vertical-align: middle !important;
      }
      td.alerttitle {
        width: 500px;
        white-space: nowrap;
      }
      /* Vertical hover */
      table.alertstable {
        overflow: hidden;
      }
      td.alertstate {
        position: relative;
        border-radius: 2px;
        width: 22px;
        color: black;
      }
      td.alertstate:hover::after {
        background-color: rgba(245, 245, 245, 0.5);
        content: '\00a0';
        height: 10000px;
        left: 0;
        position: absolute;
        top: -5000px;
        width: 100%;
        z-index: -1;
      }
      .zinfo {
        background: #d6f6ff none repeat scroll 0 0 !important;
      }
      .znormal {
        background: #aaffaa none repeat scroll 0 0 !important;
      }
      .zwarning {
        background: #fff6a5 none repeat scroll 0 0 !important;
      }
      .zaverage {
        background: #ffb689 none repeat scroll 0 0 !important;
      }
      .zhigh {
        background: #ff9999 none repeat scroll 0 0 !important;
      }
      .zdisaster {
        background: #ff3838 none repeat scroll 0 0 !important;
      }
    </style>
  </head>
  <body>
    <div id="content" class="container fullscreen" ng-controller="AlertsCtrl">
      <div class="background">
        <table class="table alertstable">
          <thead>
            <tr class="evenrow">
              <th class="alerttitle" >Alerts</th>
              <th ng-repeat="host in hosts|orderedKeys" style="padding: 0;">
                <div style="width: 20px; height: 250px;">
                  <div class="hostname" ng-bind="host"></div>
                </div>
              </th>
            </tr>
          </thead>
          <tr ng-repeat="summary in alerts|orderedKeys" ng-class-even="'evenrow'" ng-class-odd="'oddrow'">
            <td class="alerttitle">{{ summary }}</td>
            <td
              ng-repeat="host in hosts|orderedKeys"
              ng-class="{
                zinfo:     alerts[summary][host] &amp;&amp; alerts[summary][host].severity == 'info'     ,
                znormal:   alerts[summary][host] &amp;&amp; alerts[summary][host].severity == 'normal'   ,
                zwarning:  alerts[summary][host] &amp;&amp; alerts[summary][host].severity == 'warning'  ,
                zaverage:  alerts[summary][host] &amp;&amp; alerts[summary][host].severity == 'average'  ,
                zhigh:     alerts[summary][host] &amp;&amp; alerts[summary][host].severity == 'high'     ,
                zdisaster: alerts[summary][host] &amp;&amp; alerts[summary][host].severity == 'disaster'
              }"
              class="alertstate">
              <span ng-show="alerts[summary][host].status.silencedBy !== null" title="acknowledged">✔️</span>
              &nbsp;
            </td>
          </tr>
        </table>
        <div ng-show="noAlerts">
          <center>
            <a href="https://www.youtube.com/watch?v=Y6ljFaKRTrI&amp;t=7s" target="_blank"
              title="there's no sense crying over every mistake, you just keep on trying till you run out of cake">
              <img src="portal_-_the_cake_is_a_lie_474397.jpg" height="500px" />
            </a>
          </center>
        </div>
      </div>
    </div>
  </body>
  <!-- kate: space-indent on; indent-width 2; replace-tabs on; -->
</html>
